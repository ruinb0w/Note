索引的作用: 加快查询速度

`db.表名.getIndexes()` 查看表的索引

### _id索引

每个插入的条目都会有一个默认的`_id`字段

### 单键索引

值为单一的值, 例如字符串, 日期等

`db.表名.ensureIndex({key:direction})`

* direction = 1表示正向索引, = -1表示反向索引

示例:

```
db.collection.ensureIndex({x:1})
```

### 多键索引

说明:值有多个记录, 例如数组

语法: `db.表名.ensureIndex(JSON键值对)`

示例: 

```
db.collection.ensureIndex({x:[1,2,3,4]})
```

### 复合索引

说明: 查询条件不止一个键值对

语法: `db.表名.ensureIndex(JSON键值对)`

示例:

```sql
db.collection.ensureIndex({x:1, y:1})
```

### 过期索引

说明: 在一段时间后会过期的索引. 在索引过期后, 相应的数据会被删除

语法: `db.表名.ensureIndex(JSON键值对,过期时间键值对)`

过期时间键值对: `{expireAfterSeconds: 秒数}`

> 存储在过期索引字段的值必须是ISODate类型
>
> 删除过程是后台60s轮寻一次,所以时间并非精确

### 全文索引

创建全文索引

`db.表名.ensureIndex({"keyName":"text"})`

`db.表名.ensureIndex({"keyName":"text"},{"keyName":"text"})`

`db.表名.ensureIndex({"$**":"text"})`

全文查找

`db.表名.find({$text:{$search:"text"}})`

`db.表名.find({$text:{$search:"text1 text2"}})` 或查找

`db.表名.find({$text:{$search:"\"text1\" \"text2\""}})`与查找(用引号包裹)

相似度查找

说明: 搜索到的条目会附带一个,`score`字段

语法: `db.表名.find({$text:{$search:"text"},score:{$meta:"textScore"}})`

* 搜索并排序`db.表名.find({$text:{$search:"text"},score:{$meta:"textScore"}).sort(score:{$meta:"textScore"})`

### 地理位置索引

`db.表.ensureIndex({字段名: "2d"})`



---

`db.表名.ensureIndex({索引项}{name:"自定义名字"})`

`db.表名.ensureIndex({索引项},{unique:true|false})`

