# 常用命令

### ps

说明: 查看进程

语法: `ps [选项]`

* `-e` 列出全部进程
* `-f` 列出全部进程信息列

输出说明

| UID              | PID    | PPID     | C       | STIME    | TTY  | TIME     | CMD        |
| ---------------- | ------ | -------- | ------- | -------- | ---- | -------- | ---------- |
| 启动进程的用户ID | 进程ID | 父进程ID | cpu占用 | 启动时间 | 终端 | 运行时间 | 执行的命令 |

> 如果一个进程没有PPID则是僵尸进程

### kill

说明: 杀死进程

语法: `kill 进程ID`

### killall

说明: 杀死一组进程. `killall`是完整匹配的, 所以比`pkill`要安全.

语法: `killall 进程名`

### pgrep

说明: 根据名字或其他属性获取PIDs

### pkill

说明: 根据名字或其他属性阻断进程

# 后台进程

运行后台进程的方法

* 通过`command &` 直接将命令放入后台
* 通过`ctrl+z`将前台进程放入后台,然后`bg`来使放入后台的进程继续执行

后台进程的特点

* 继承当前 session （对话）的标准输出（stdout）和标准错误（stderr）。
* 不再继承当前 session 的标准输入（stdin）。如果进程试图读取标准输入，就会暂停执行（halt）。

退出session

* 前台进程会在推出session前收到`SIGHUP`信号, 然后关闭进程
* 后台进程根据`shopt | grep huponexit` 来确定是否会收到`SIGHUP`信号(off为不收)

### disown

说明: 将指定任务从"后台任务"列表中移除, 默认移除最近加入jobs

语法: `disdown [选项] [%jobID]` 

* `-r` 移除所有正在执行的后台任务
* `-a` 移除所有后台任务
* `-h` 不移除后台任务, 但使他们不会收到`SIGHUP`
* `jogID` 可以在`jobs`命令中看到

> 注意要重定向I/O否则会在I/O过程中崩溃

### nohup

说明:

* 阻止`SIGHUP`信号发到这个进程。
* 关闭标准输入。该进程不再能够接收任何输入，即使运行在前台。
* 重定向标准输出和标准错误到文件`nohup.out`, 或者通过`>` 来重定向

语法: `nohup node server.js [> outFile] &`