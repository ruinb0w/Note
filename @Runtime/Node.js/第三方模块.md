## nodemon

文件修改保存后会自动执行

## nrm

node repository manager

## gulp

说明:

* 压缩合并HTML,CSS,JS
* 语法转换
* 公共文件抽离
* 修改文件,浏览器自动刷新

使用

1. 在项目根目录创建gulpfile.js
2. 在src目录放源文件, 然后就可以在dist目录获取目标文件``

`gulp.src()` 指定源文件

`gulp.dest()` 指定目标目录

`gulp.task()` 建立gulp任务

`gulp.watch()` 监控文件变化

```js
gulp.task('first', ()=>{
	gulp.src('./src/css/base.css').pipe(gulp.dest('./dist/css'))
})
```

## gulp-cli

gulp命令行工具

gulp插件

htlp-htmlmin: html文件压缩

gulp-csso: css压缩

gulp-babel: js语法转化

gulp-less: less语法转化

gulp-uglify: 压缩混淆js

gulp-file-include 公共文件包含

browsersync: 浏览器实时同步

## mime

根据文件路径获取文件类型

```js
let type = mime.getType(path)
```

## art-template

nodejs模板引擎

### 使用方法

```js
const template = require('art-template');
const html = template('模板路径', 数据);
```

### 模板语法

```html
<!--可以直接渲染一个便变量的值-->
<h1>
    {{title}}
</h1>

<!--可以进行简单的运算-->
<div>
    {{a + b}}
    {{a == b ? "相等": "不相等"}}
</div>

<!--如果要对数据进行解析需要加@, 例如数据是一个html元素-->
{{@数据}}

<!--条件判断,为真则显示中间的内容-->
{{if 条件}}...{{/if}}
{{if v1}}...{{else if v2}}...{{/if}}

<!--循环渲染-->
{{each 数据}}
	<!--index为索引, value为遍历到的值-->
	{{$index}}{{$value}}
{{/each}}
```

### 子模板

```html
<!--引入子模板-->
{{include '子模板路径'}}
```

### 模板继承

```html
<!--模板骨架-->
<html>
    <head>
        <meta charset="utf-8"/>
        <title>HTML模板骨架</title>
        {{block '自定义名字'}}{{/block}}
    </head>
    <body>
        {{block '自定义名字'}}{{/block}}
    </body>
</html>
```

```html
<!--继承模板-->
{{extend '骨架模板路径'}}
{{block '名字'}}要填充的内容{{/block}}
{{block '名字'}}要填充的内容{{/block}}
```

### 在模板中使用函数

```js
function hello(){
    console.log('hello')
}
template.defaults.imports.hello = hello;
```

### 模板配置

```js
// 配置根路径
template.defaults.root="路径"
// 配置默认后缀名
template.defaults.extname="后缀"
```

## date-formate

格式化日期

## router

```js
const getRouter = require('router');
const router = getRouter();
router.get('/add', (req, res)=>{
    
})
server.on('request', (req,res)=>{
    router(req,res, ()=>{});
})
```

## serve-static

静态资源访问服务

```js
const serveStatic = require('serve-static');
const serve = serveStatic('public')
serve.on('request', (req, res)=>{
    serve(req, res, ()=>{});
})
serve.listen(3000);
```



## webSocket

### 简介

在nodejs中通过`ws`模块来使用`websocket`

ws模块既有服务器端,又有客户端

```js
// 导入WebSocket模块:
const WebSocket = require('ws');
// 引用Server类:
const WebSocketServer = WebSocket.Server;
// 实例化:
const wss = new WebSocketServer({
    port: 3000
});

wss.on('connection', function (ws) {
    console.log(`[SERVER] connection()`);
    ws.on('message', function (message) {
        console.log(`[SERVER] Received: ${message}`);
        ws.send(`ECHO: ${message}`, (err) => {
            if (err) {
                console.log(`[SERVER] error: ${err}`);
            }
        });
    })
});
```

```js
const webSocket = require("ws");
let ws = new WebSocket('ws://localhost:3000/test');

// 打开WebSocket连接后立刻发送一条消息:
ws.on('open', function () {
    console.log(`[CLIENT] open()`);
    ws.send('Hello!');
});

// 响应收到的消息:
ws.on('message', function (message) {
    console.log(`[CLIENT] Received: ${message}`);
}
```

## bcrypt

加密工具

### 加密密码

```js
const bcrypt = require("bcrypt");
async function run(){
    let salt = await bcrypt.getSalt(10); // 默认为10
	let pass = await bcrypt.hash('名密码', salt);
}
```

### 对比密码

```
let isEqual = await bcrypt.compare('明文密码','加密密码')
```

### express-session

会话模块

```js
const session = require('express-session');
app.use(session({secret:'secret key'}))
```

## body-parser

