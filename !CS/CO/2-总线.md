# 总线(bus)

## 基本概念

### 为什么需要系统总线

设备之间需要通信就需要进行连接, 但如果设备之间两两连接, 则需要大量和线设备也需要大量的接口, 所以通过总线来实现设备之间的互联. 但总线在某一时刻只能被两个设备占用, 所以需要多条总线来避免总线成为系统效率的瓶颈

## 总线的分类

### 根据总线连接的设备分类

片内总线: 芯片内部连接各寄存器和处理控制设备的总线

系统总线: 连接各个主要部件的总线

* 根据其功能可以分为

* * 数据总线
* * 地址总线
  * 控制总线

通信总线: 连接各个计算机系统或计算机系统与某些外围设备

### 按总线数据传输方式分类

单总线, 多总线

## 总线的特性与性能指标

### 总线的性能指标

1. 总线宽度: 数据线数
2. 标准传输率: 每秒传输的最大字节数
3. 时钟: 同步/不同步
4. 总线复用: 地址线和数据线复用, 减少芯片的管脚数
5. 信号线数: 地址线, 数据线和控制线的总和
6. 总线控制方式

## 总线控制

### 总线判优控制

**控制部件分类**

主设备: 对总线有控制权

从设备: 只能响应主设备发送的命令

**判优控制方式**

集中式

* 链式查询: 结构简单, 速度慢, 电路故障敏感, 优先级设置不灵活
* 计数器定时查询: 优先级设置灵活, 速度快, 所需地址线较多
* 独立请求: 优先级设置灵活, 速度快, 所需的BG和BR较多

分布式

### 总线通信控制

解决通信双方的协调问题

**总线通信方式**

同步通信: 采用时标来控制

异步通信: 采用应答模式

- 不互锁: 主从设备不管对方是否接收到
- 半互锁: 主设备请求信号会一直保持, 直到接收到从设备的应答
- 全互锁: 主设备和从设备的请求或应答信号会一直保持, 直到对方进行响应

半同步通信: 主从设备遵循同步通信模式, 但从设备可以向主设备发送等待信号让主设备插入额外的时钟周期. 解决了主从设备速度不一致的问题

分离式通信: 主模块发送请求信号后放弃总线, 从模块准备好后再次请求占用总线. 解决了前面几种通信方式在准备数据的过程中对总线的占用